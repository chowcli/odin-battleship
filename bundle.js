(()=>{"use strict";const t=function(t){t.innerHTML="";for(var e=0;e<10;e++)for(var r=0;r<10;r++){var n=document.createElement("div");n.classList.add("cell","empty"),n.setAttribute("data-y",e),n.setAttribute("data-x",r),t.appendChild(n)}},e=function(t,e){var r=t.toLowerCase(),n=e,a=n;return{getName:function(){return r},getLength:function(){return n},getLives:function(){return a},isHit:function(){a>0&&(a-=1)},isSunk:function(){return 0===a}}};function r(t,e,r,n,a){return!function(t,e,r,n){return("x"===r?t:e)+n-1>=10}(e,r,n,a)&&!function(t,e,r,n,a){for(var o,c=0;c<a;c++)if(o="x"===n?e+c:e,""!==t["x"===n?r:r+c][o])return!0;return!1}(t,e,r,n,a)}function n(){return Math.floor(10*Math.random())}function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}const c=function(){var t,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"human",i=function(){var t=function(){for(var t=new Array(10),e=0;e<10;e++)t[e]=new Array(10).fill("");return t}(),e=[];function n(t){return e.find((function(e){return e.getName()===t}))}return{getBoard:function(){return t},getFleet:function(){return e},getShip:n,addToFleet:function(){e.push.apply(e,arguments)},placeShip:function(e,n,a,o){var c=e.getLength(),i=e.getName();if(r(t,n,a,o,c)){for(var u,s=0;s<c;s++)u="x"===o?n+s:n,t["x"===o?a:a+s][u]={type:i,isHit:!1};return!0}return!1},receiveAttack:function(e,r){var a=t[r][e];return""===a?(t[r][e]=0,2):!1===a.isHit?(a.isHit=!0,n(a.type).isHit(),1):0},areAllSunk:function(){return e.every((function(t){return t.isSunk()}))}}}();function u(e,r){return t.receiveAttack(e,r)}return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){var n,o,c,i;n=t,o=e,c=r[e],i=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==a(i)?i:String(i))in n?Object.defineProperty(n,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[o]=c})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({getType:function(){return c},getBoard:function(){return i},prepareFleet:function(){var t=[e("carrier",5),e("battleship",4),e("destroyer",3),e("submarine",3),e("patrol boat",2)];i.addToFleet.apply(i,t)},setEnemyBoard:function(e){t=e}},"human"===c?{attack:u}:{randomAttack:function(){for(var t,e,r=0;0===r;)r=u(t=n(),e=n());return{x:t,y:e,attackSuccessful:r}},randomShipPlacement:function(){var t=i.getFleet(),e=[];t.forEach((function(t){for(var r=!1,a=function(){var a=n(),o=n(),c=Math.random()<.5?"x":"y",u=e.some((function(t){var e=t.x,r=t.y;return Math.abs(e-a)<2&&Math.abs(r-o)<2}));if(!u&&(r=i.placeShip(t,a,o,c)))for(var s,l,f=0;f<t.getLength();f++)s="x"===c?a+f:a,l="x"===c?o:o+f,e.push({x:s,y:l})};!r;)a()}))}})},i=function(){var e,n,a=(e=c(),n=c("computer"),e.prepareFleet(),n.prepareFleet(),e.setEnemyBoard(n.getBoard()),n.setEnemyBoard(e.getBoard()),n.randomShipPlacement(),{player1:e,player2:n}),o=a.player1,i=a.player2,u=o.getBoard(),s=i.getBoard(),l=document.querySelector(".ship-placement-dialog");l.showModal();var f=document.querySelector(".player-board"),d=document.querySelector(".computer-board");t(f),t(d),t(l.querySelector(".ship-board")),function(t,e,n){var a=t.querySelector(".instruction"),o=t.querySelector(".change-axis"),c=t.querySelector(".ship-board"),i=e.getFleet(),u=0,s=i[u],l=!0;o.addEventListener("click",(function(){l=!l,o.textContent=l?"Axis: X":"Axis: Y"})),c.addEventListener("pointerover",(function(t){t.target.classList.contains("cell")&&function(t,e,n,a,o,c){for(var i,u,s=r(a,t,e,n,o)?"valid":"invalid",l=0;l<o&&(u="x"===n?e:e+l,!((i="x"===n?t+l:t)>=10||u>=10));l++)c.querySelector('.cell[data-y="'.concat(u,'"][data-x="').concat(i,'"]')).classList.add(s)}(parseInt(t.target.dataset.x,10),parseInt(t.target.dataset.y,10),l?"x":"y",e.getBoard(),s.getLength(),c)})),c.addEventListener("pointerout",(function(t){t.target.classList.contains("cell")&&function(t,e,r,n,a){for(var o,c,i=0;i<n&&(c="x"===r?e:e+i,!((o="x"===r?t+i:t)>=10||c>=10));i++)a.querySelector('.cell[data-y="'.concat(c,'"][data-x="').concat(o,'"]')).classList.remove("valid","invalid")}(parseInt(t.target.dataset.x,10),parseInt(t.target.dataset.y,10),l?"x":"y",s.getLength(),c)})),c.addEventListener("click",(function(r){if(r.target.classList.contains("cell")){var o,f=parseInt(r.target.dataset.x,10),d=parseInt(r.target.dataset.y,10),p=l?"x":"y";e.placeShip(s,f,d,p)&&(function(t,e,r,n,a,o){for(var c,i,u=0;u<n.getLength();u++){c="x"===r?t+u:t,i="x"===r?e:e+u;var s=a.querySelector('.cell[data-y="'.concat(i,'"][data-x="').concat(c,'"]'));s.classList.remove("empty"),s.setAttribute("data-ship",n.getName());var l=o.querySelector('.cell[data-y="'.concat(i,'"][data-x="').concat(c,'"]'));l.classList.remove("empty"),l.setAttribute("data-ship",n.getName())}}(f,d,p,s,c,n),5==++u?t.close():(s=i[u],a.textContent="Place your ".concat((o=s.getName()).charAt(0).toUpperCase()+o.slice(1))))}}))}(l,u,f);var p=!0,y=0;d.addEventListener("click",(function(t){!function(t){if(t.target.classList.contains("cell")){var e=t.target;if(!e.classList.contains("hit")&&!e.classList.contains("missed")){var r=parseInt(e.dataset.x,10),n=parseInt(e.dataset.y,10),a=1===o.attack(r,n)?"hit":"missed";e.classList.add(a),p=!1,y++}}}(t),function(){if(!p){var t=i.randomAttack(),e=t.x,r=t.y,n=1===t.attackSuccessful?"hit":"missed";f.querySelector('.cell[data-y="'.concat(r,'"][data-x="').concat(e,'"]')).classList.add(n),p=!0}}(),y>=17&&function(){var t,e=(t=s,u.areAllSunk()?2:!!t.areAllSunk()&&1);if(e){var r=document.querySelector(".reset-game-dialog"),n=r.querySelector("h3"),a=r.querySelector("button");n.textContent=1===e?"Congratulations You Won!":"Computer Won!",r.showModal(),a.addEventListener("click",(function(){window.location.reload()}))}}()}))};document.addEventListener("DOMContentLoaded",(function(){return i()}))})();
//# sourceMappingURL=bundle.js.map